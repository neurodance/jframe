<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JFrame - AI Adaptive Cards Generator</title>
    <link rel="stylesheet" href="style.css">
    <!-- Adaptive Cards CSS -->
    <link rel="stylesheet" href="https://unpkg.com/adaptivecards@4.0.0/lib/adaptivecards.css" onerror="this.href='lib/adaptivecards.css'">
</head>
<body>
    <div class="container">
        <header>
            <h1>JFrame</h1>
            <p>AI-powered Adaptive Cards Generator</p>
        </header>
        
        <main class="chat-container">
            <div class="messages-area" id="messagesArea">
                <div class="welcome-message">
                    <p>Welcome to JFrame! Enter a prompt to generate an Adaptive Card.</p>
                    <p class="example">Example: "create a simple card with a picture and a short description of the Eiffel Tower in Paris"</p>
                </div>
            </div>
            
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="promptInput" placeholder="Enter your prompt to generate an Adaptive Card... (works in demo mode without API key)" maxlength="500">
                    <button id="generateBtn" type="button">Generate</button>
                </div>
                <div class="api-key-container">
                    <input type="password" id="apiKeyInput" placeholder="Enter your OpenAI API key (optional - works in demo mode without)" maxlength="200">
                    <small>Your API key is stored locally and never sent to our servers. Demo mode available without API key.</small>
                </div>
            </div>
        </main>
    </div>

    <!-- Adaptive Cards JS -->
    <script>
        function loadFallbackScript() {
            const script = document.createElement('script');
            script.src = 'lib/adaptivecards.js';
            script.onload = function() {
                console.log('Fallback Adaptive Cards library loaded');
            };
            script.onerror = function() {
                console.warn('Adaptive Cards library not available. Using minimal fallback.');
                window.AdaptiveCards = {
                    AdaptiveCard: function() {
                        return {
                            parse: function() {},
                            render: function() {
                                const div = document.createElement('div');
                                div.innerHTML = '<p><strong>Adaptive Cards library not loaded.</strong><br>The card JSON will be displayed instead.</p>';
                                div.style.padding = '1rem';
                                div.style.border = '1px solid #ddd';
                                div.style.borderRadius = '8px';
                                div.style.background = '#f8f9fa';
                                return div;
                            }
                        };
                    }
                };
            };
            document.head.appendChild(script);
        }
        
        // Try to load from CDN first, fallback to local
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/adaptivecards@4.0.0/lib/adaptivecards.js';
        script.onload = function() {
            console.log('CDN Adaptive Cards library loaded');
        };
        script.onerror = function() {
            console.log('CDN failed, loading fallback...');
            loadFallbackScript();
        };
        document.head.appendChild(script);
    </script>
    <script src="app.js"></script>
</body>
</html>