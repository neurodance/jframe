<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jott PoC - Dependency Validation</title>

    <!-- Adaptive Cards CDN -->
    <script src="https://unpkg.com/adaptivecards/dist/adaptivecards.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/adaptivecards/dist/css/adaptivecards.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .test-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e9ecef;
        }

        .test-card.success {
            border-color: #28a745;
            background: #f0fff4;
        }

        .test-card.error {
            border-color: #dc3545;
            background: #fff0f0;
        }

        .test-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-icon {
            font-size: 1.2em;
        }

        .test-content {
            color: #6c757d;
            font-size: 0.95em;
            margin-top: 10px;
        }

        .adaptive-card-container {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .control-panel {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .layer-indicator {
            display: inline-block;
            padding: 4px 12px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
            margin-left: 10px;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .metric-label {
            font-size: 0.85em;
            color: #6c757d;
            margin-top: 5px;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .loading {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† Jott Proof of Concept</h1>
        <p class="subtitle">Validating Adaptive Cards integration with UI/UX enhancements</p>

        <div class="control-panel">
            <h3>Dependency Tests</h3>
            <div class="control-buttons">
                <button onclick="jottPoc.runAllTests()">Run All Tests</button>
                <button onclick="jottPoc.testAdaptiveCards()">Test AC Rendering</button>
                <button onclick="jottPoc.testLayerProgression()">Test Layers</button>
                <button onclick="jottPoc.testInteractivity()">Test Interactivity</button>
                <button onclick="jottPoc.testAdaptation()">Test Adaptation</button>
            </div>
        </div>

        <div class="test-grid" id="testGrid">
            <!-- Test results will appear here -->
        </div>

        <div class="metrics" id="metrics" style="display: none;">
            <div class="metric">
                <div class="metric-value" id="renderTime">-</div>
                <div class="metric-label">Render Time (ms)</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="layerCount">-</div>
                <div class="metric-label">Layers Available</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="semanticDensity">-</div>
                <div class="metric-label">Semantic Density</div>
            </div>
            <div class="metric">
                <div class="metric-value" id="interactionPoints">-</div>
                <div class="metric-label">Interaction Points</div>
            </div>
        </div>
    </div>

    <script>
        class JottPoC {
            constructor() {
                this.testGrid = document.getElementById('testGrid');
                this.metrics = document.getElementById('metrics');
                this.tests = [];
                this.startTime = 0;
            }

            // Core test: Validate Adaptive Cards library
            async testAdaptiveCards() {
                const testId = 'ac-test';
                this.addTestCard(testId, 'Adaptive Cards Library', 'Testing core AC functionality...');

                try {
                    // Check if AC library loaded
                    if (typeof AdaptiveCards === 'undefined') {
                        throw new Error('AdaptiveCards library not loaded');
                    }

                    // Create a test card
                    const testCard = {
                        type: "AdaptiveCard",
                        version: "1.5",
                        body: [
                            {
                                type: "TextBlock",
                                text: "‚úÖ Adaptive Cards Working",
                                size: "Large",
                                weight: "Bolder",
                                color: "Good"
                            },
                            {
                                type: "TextBlock",
                                text: "Library version: " + (AdaptiveCards.Version || "Unknown"),
                                wrap: true
                            }
                        ]
                    };

                    // Render the card
                    const adaptiveCard = new AdaptiveCards.AdaptiveCard();
                    adaptiveCard.parse(testCard);
                    const renderedCard = adaptiveCard.render();

                    this.updateTestCard(testId, true, 'AC library loaded and rendering', renderedCard);
                    return true;
                } catch (error) {
                    this.updateTestCard(testId, false, error.message);
                    return false;
                }
            }

            // Test layer progression concept
            async testLayerProgression() {
                const testId = 'layer-test';
                this.addTestCard(testId, 'Progressive Layers', 'Testing layer-based content...');

                try {
                    const layers = {
                        glance: this.createGlanceLayer(),
                        scan: this.createScanLayer(),
                        read: this.createReadLayer()
                    };

                    let currentLayer = 'glance';
                    const container = document.createElement('div');

                    // Add layer indicator
                    const indicator = document.createElement('span');
                    indicator.className = 'layer-indicator';
                    indicator.textContent = 'Current: Glance Layer';
                    container.appendChild(indicator);

                    // Create card container
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'adaptive-card-container';
                    container.appendChild(cardDiv);

                    // Render initial layer
                    const adaptiveCard = new AdaptiveCards.AdaptiveCard();
                    adaptiveCard.parse(layers[currentLayer]);
                    cardDiv.appendChild(adaptiveCard.render());

                    // Add progression button
                    const button = document.createElement('button');
                    button.textContent = 'Next Layer';
                    button.style.marginTop = '10px';
                    button.onclick = () => {
                        const progression = ['glance', 'scan', 'read'];
                        const currentIndex = progression.indexOf(currentLayer);
                        currentLayer = progression[(currentIndex + 1) % 3];

                        indicator.textContent = `Current: ${currentLayer.charAt(0).toUpperCase() + currentLayer.slice(1)} Layer`;
                        cardDiv.innerHTML = '';
                        adaptiveCard.parse(layers[currentLayer]);
                        cardDiv.appendChild(adaptiveCard.render());
                    };
                    container.appendChild(button);

                    this.updateTestCard(testId, true, 'Layer progression working', container);
                    return true;
                } catch (error) {
                    this.updateTestCard(testId, false, error.message);
                    return false;
                }
            }

            // Test interactivity
            async testInteractivity() {
                const testId = 'interact-test';
                this.addTestCard(testId, 'Interactivity', 'Testing user interactions...');

                try {
                    const interactiveCard = {
                        type: "AdaptiveCard",
                        version: "1.5",
                        body: [
                            {
                                type: "TextBlock",
                                text: "Interactive Jott Demo",
                                size: "Large",
                                weight: "Bolder"
                            },
                            {
                                type: "Input.Text",
                                id: "userInput",
                                placeholder: "Type something..."
                            },
                            {
                                type: "Input.ChoiceSet",
                                id: "choice",
                                choices: [
                                    { title: "Glance", value: "glance" },
                                    { title: "Scan", value: "scan" },
                                    { title: "Read", value: "read" }
                                ],
                                value: "glance"
                            }
                        ],
                        actions: [
                            {
                                type: "Action.Submit",
                                title: "Process Input",
                                data: { action: "process" }
                            }
                        ]
                    };

                    const adaptiveCard = new AdaptiveCards.AdaptiveCard();
                    adaptiveCard.onExecuteAction = (action) => {
                        if (action instanceof AdaptiveCards.SubmitAction) {
                            const inputs = action.data;
                            alert(`Received: ${JSON.stringify(inputs, null, 2)}`);
                        }
                    };
                    adaptiveCard.parse(interactiveCard);
                    const rendered = adaptiveCard.render();

                    this.updateTestCard(testId, true, 'Interactivity enabled', rendered);
                    return true;
                } catch (error) {
                    this.updateTestCard(testId, false, error.message);
                    return false;
                }
            }

            // Test adaptation capabilities
            async testAdaptation() {
                const testId = 'adapt-test';
                this.addTestCard(testId, 'Context Adaptation', 'Testing adaptive rendering...');

                try {
                    const context = this.detectContext();
                    const adaptedCard = {
                        type: "AdaptiveCard",
                        version: "1.5",
                        body: [
                            {
                                type: "TextBlock",
                                text: "üéØ Context-Aware Jott",
                                size: "Large",
                                weight: "Bolder"
                            },
                            {
                                type: "FactSet",
                                facts: [
                                    { title: "Device:", value: context.device },
                                    { title: "Time:", value: context.timeOfDay },
                                    { title: "Theme:", value: context.theme },
                                    { title: "Viewport:", value: context.viewport }
                                ]
                            },
                            {
                                type: "TextBlock",
                                text: `Optimized for ${context.timeOfDay} ${context.device} usage`,
                                wrap: true,
                                color: "Accent"
                            }
                        ]
                    };

                    const adaptiveCard = new AdaptiveCards.AdaptiveCard();
                    adaptiveCard.parse(adaptedCard);
                    const rendered = adaptiveCard.render();

                    this.updateTestCard(testId, true, 'Context detection working', rendered);
                    this.showMetrics();
                    return true;
                } catch (error) {
                    this.updateTestCard(testId, false, error.message);
                    return false;
                }
            }

            // Helper methods
            createGlanceLayer() {
                return {
                    type: "AdaptiveCard",
                    version: "1.5",
                    body: [
                        {
                            type: "ColumnSet",
                            columns: [
                                {
                                    type: "Column",
                                    width: "auto",
                                    items: [{
                                        type: "TextBlock",
                                        text: "üß†",
                                        size: "ExtraLarge"
                                    }]
                                },
                                {
                                    type: "Column",
                                    width: "stretch",
                                    items: [{
                                        type: "TextBlock",
                                        text: "Jott: AI Cards that Think",
                                        size: "Large",
                                        weight: "Bolder"
                                    }]
                                }
                            ]
                        }
                    ]
                };
            }

            createScanLayer() {
                return {
                    type: "AdaptiveCard",
                    version: "1.5",
                    body: [
                        {
                            type: "TextBlock",
                            text: "üß† Jott: AI Cards that Think",
                            size: "Large",
                            weight: "Bolder"
                        },
                        {
                            type: "TextBlock",
                            text: "Key Benefits:",
                            weight: "Bolder",
                            spacing: "Medium"
                        },
                        {
                            type: "Container",
                            items: [
                                { type: "TextBlock", text: "üìä 10x information density", wrap: true },
                                { type: "TextBlock", text: "üéØ Adapts to each reader", wrap: true },
                                { type: "TextBlock", text: "üöÄ Creates in seconds", wrap: true },
                                { type: "TextBlock", text: "üåê Works everywhere", wrap: true }
                            ]
                        }
                    ]
                };
            }

            createReadLayer() {
                return {
                    type: "AdaptiveCard",
                    version: "1.5",
                    body: [
                        {
                            type: "TextBlock",
                            text: "üß† Jott: The Evolution of Adaptive Cards",
                            size: "Large",
                            weight: "Bolder"
                        },
                        {
                            type: "TextBlock",
                            text: "How It Works",
                            weight: "Bolder",
                            spacing: "Medium"
                        },
                        {
                            type: "TextBlock",
                            text: "Jotts are intelligent communication units that combine the universal deployment of Adaptive Cards with embedded AI agents. Each Jott understands its communication goal and adapts its presentation based on the reader's context, device, and interaction patterns.",
                            wrap: true
                        },
                        {
                            type: "FactSet",
                            facts: [
                                { title: "Base:", value: "Adaptive Cards 1.5" },
                                { title: "Intelligence:", value: "Claude AI" },
                                { title: "Optimization:", value: "Neurocognitive" },
                                { title: "Deployment:", value: "Universal JSON" }
                            ]
                        }
                    ]
                };
            }

            detectContext() {
                const now = new Date();
                const hours = now.getHours();

                return {
                    device: /mobile/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',
                    timeOfDay: hours < 12 ? 'Morning' : hours < 17 ? 'Afternoon' : 'Evening',
                    theme: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'Dark' : 'Light',
                    viewport: `${window.innerWidth}x${window.innerHeight}`
                };
            }

            showMetrics() {
                this.metrics.style.display = 'grid';
                document.getElementById('renderTime').textContent = Date.now() - this.startTime + 'ms';
                document.getElementById('layerCount').textContent = '3';
                document.getElementById('semanticDensity').textContent = '8.5/10';
                document.getElementById('interactionPoints').textContent = '5';
            }

            // Test management
            addTestCard(id, title, status) {
                const card = document.createElement('div');
                card.id = id;
                card.className = 'test-card loading';
                card.innerHTML = `
                    <div class="test-title">
                        <span class="status-icon">‚è≥</span>
                        ${title}
                    </div>
                    <div class="test-content">${status}</div>
                `;
                this.testGrid.appendChild(card);
            }

            updateTestCard(id, success, message, element = null) {
                const card = document.getElementById(id);
                if (!card) return;

                card.className = success ? 'test-card success' : 'test-card error';
                card.querySelector('.status-icon').textContent = success ? '‚úÖ' : '‚ùå';
                card.querySelector('.test-content').textContent = message;

                if (element) {
                    const container = document.createElement('div');
                    container.className = 'adaptive-card-container';
                    container.appendChild(element);
                    card.appendChild(container);
                }
            }

            async runAllTests() {
                this.testGrid.innerHTML = '';
                this.startTime = Date.now();

                await this.testAdaptiveCards();
                await new Promise(r => setTimeout(r, 500));

                await this.testLayerProgression();
                await new Promise(r => setTimeout(r, 500));

                await this.testInteractivity();
                await new Promise(r => setTimeout(r, 500));

                await this.testAdaptation();
            }
        }

        // Initialize PoC
        const jottPoc = new JottPoC();

        // Auto-run tests on load
        window.addEventListener('load', () => {
            setTimeout(() => jottPoc.runAllTests(), 500);
        });
    </script>
</body>
</html>